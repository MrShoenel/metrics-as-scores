<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>metrics_as_scores.tools package &mdash; Metrics As Scores  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="metrics_as_scores.webapp package" href="metrics_as_scores.webapp.html" />
    <link rel="prev" title="metrics_as_scores.distribution package" href="metrics_as_scores.distribution.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Metrics As Scores
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">Metrics As Scores


</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#example-usage">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#datasets">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#personalizing-the-web-application">Personalizing the Web Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html#references">References</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">metrics_as_scores</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="metrics_as_scores.html">metrics_as_scores package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="metrics_as_scores.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="metrics_as_scores.cli.html">metrics_as_scores.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics_as_scores.data.html">metrics_as_scores.data package</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics_as_scores.distribution.html">metrics_as_scores.distribution package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">metrics_as_scores.tools package</a></li>
<li class="toctree-l4"><a class="reference internal" href="metrics_as_scores.webapp.html">metrics_as_scores.webapp package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="metrics_as_scores.html#module-metrics_as_scores">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Metrics As Scores</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">metrics_as_scores</a></li>
          <li class="breadcrumb-item"><a href="metrics_as_scores.html">metrics_as_scores package</a></li>
      <li class="breadcrumb-item active">metrics_as_scores.tools package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/metrics_as_scores.tools.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="metrics-as-scores-tools-package">
<h1>metrics_as_scores.tools package<a class="headerlink" href="#metrics-as-scores-tools-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-metrics_as_scores.tools.funcs">
<span id="metrics-as-scores-tools-funcs-module"></span><h2>metrics_as_scores.tools.funcs module<a class="headerlink" href="#module-metrics_as_scores.tools.funcs" title="Permalink to this heading"></a></h2>
<p>This module contains few functions that are required in multiple other modules
and classes of Metrics As Scores.</p>
<dl class="py function">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.nonlinspace">
<span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">nonlinspace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">start:</span> <span class="pre">float,</span> <span class="pre">stop:</span> <span class="pre">float,</span> <span class="pre">num:</span> <span class="pre">int,</span> <span class="pre">func:</span> <span class="pre">~typing.Callable[[float],</span> <span class="pre">float]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">NDArray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#nonlinspace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.nonlinspace" title="Permalink to this definition"></a></dt>
<dd><p>Used to create a non-linear space. This is useful to sample with greater detail
in some place, and with lesser detail in another.</p>
<dl class="simple">
<dt>start: <code class="docutils literal notranslate"><span class="pre">float</span></code></dt><dd><p>The start of the space.</p>
</dd>
<dt>stop: <code class="docutils literal notranslate"><span class="pre">float</span></code></dt><dd><p>The stop (end) of the space.</p>
</dd>
<dt>num: <code class="docutils literal notranslate"><span class="pre">int</span></code></dt><dd><p>The number of samples.</p>
</dd>
<dt>func: <code class="docutils literal notranslate"><span class="pre">Callable[[float],</span> <span class="pre">float]</span></code></dt><dd><p>A function that, given a linear <cite>x</cite>, creates a non-linear <cite>y</cite>. The default
is <code class="code docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">1.</span> <span class="pre">-</span> <span class="pre">.9</span> <span class="pre">*</span> <span class="pre">square(x)</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.flatten_dict">
<span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">flatten_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'_'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#flatten_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.flatten_dict" title="Permalink to this definition"></a></dt>
<dd><p>Recursively flatten a dictionary, creating merged key names.
Courtesy of <a class="reference external" href="https://stackoverflow.com/a/6027615/1785141">https://stackoverflow.com/a/6027615/1785141</a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.Interpolator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">Interpolator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">xp:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64],</span> <span class="pre">fp:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64],</span> <span class="pre">left:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">right:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#Interpolator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.Interpolator" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Helper class used for transforming and interpolating a CDF into a PPF.</p>
<dl class="py method">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.Interpolator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">xp:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64],</span> <span class="pre">fp:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64],</span> <span class="pre">left:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">right:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#Interpolator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.Interpolator.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.Interpolator.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">x:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64]</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float64]</span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#Interpolator.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.Interpolator.__call__" title="Permalink to this definition"></a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.cdf_to_ppf">
<span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">cdf_to_ppf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cdf:</span> <span class="pre">~typing.Callable[[float],</span> <span class="pre">float],</span> <span class="pre">x:</span> <span class="pre">~nptyping.ndarray.NDArray[~nptyping.base_meta_classes.Shape[*],</span> <span class="pre">~numpy.float64],</span> <span class="pre">cdf_samples:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">5000,</span> <span class="pre">y_left:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">y_right:</span> <span class="pre">~typing.Optional[float]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#metrics_as_scores.tools.funcs.Interpolator" title="metrics_as_scores.tools.funcs.Interpolator"><span class="pre">Interpolator</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#cdf_to_ppf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.cdf_to_ppf" title="Permalink to this definition"></a></dt>
<dd><p>Adapted implementation from <code class="xref py py-meth docutils literal notranslate"><span class="pre">statsmodels.distributions.empirical_distribution.monotone_fn_inverter()</span></code>
that handles out-of-bounds values explicitly. Also, we assume that <code class="docutils literal notranslate"><span class="pre">fn</span></code> is vectorized.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.natsort">
<span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">natsort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#natsort"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.natsort" title="Permalink to this definition"></a></dt>
<dd><p>Natural string sorting.</p>
<p>Courtesy of <a class="reference external" href="https://stackoverflow.com/a/16090640/1785141">https://stackoverflow.com/a/16090640/1785141</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metrics_as_scores.tools.funcs.transform_to_MAS_dataset">
<span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.funcs.</span></span><span class="sig-name descname"><span class="pre">transform_to_MAS_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/funcs.html#transform_to_MAS_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.funcs.transform_to_MAS_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Transforms a “typical” data frame into the format that is used by Metrics As Scores.
A typical data frame is one in which there is a column with the group, and a dedicated
column for each feature’s observations. That kind of data frame, however, implies we
have the same amount of observations per feature. The format used by Metrics As Scores
stacks the observations and adds an extra ordinal column for the feature. This way,
we allow an arbitrary number of observations per feature.</p>
<dl class="simple">
<dt>df: <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code></dt><dd><p>The original data frame that has one or more feature columns and one group designated
group column.</p>
</dd>
<dt>group_col: <code class="docutils literal notranslate"><span class="pre">str</span></code></dt><dd><p>The name of the group column.</p>
</dd>
<dt>feature_cols: <code class="docutils literal notranslate"><span class="pre">list[str]</span></code></dt><dd><p>A non-empty list of features’ names to include.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>Exception:
If the number of given feature columns is zero or if any of the given features or
the group is not present as a column in the data frame.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A data frame with the 3 columns <code class="docutils literal notranslate"><span class="pre">Feature</span></code> (ordinal; name of the feature column
from the original dataset), <code class="docutils literal notranslate"><span class="pre">Group</span></code> (ordinal, the <code class="docutils literal notranslate"><span class="pre">group_col</span></code> repeated <code class="docutils literal notranslate"><span class="pre">n</span></code>
times, where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the length of the given data frame), and <code class="docutils literal notranslate"><span class="pre">Value</span></code> (the
numeric observation).</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-metrics_as_scores.tools.lazy">
<span id="metrics-as-scores-tools-lazy-module"></span><h2>metrics_as_scores.tools.lazy module<a class="headerlink" href="#module-metrics_as_scores.tools.lazy" title="Permalink to this heading"></a></h2>
<p>This module contains a single class, <a class="reference internal" href="#metrics_as_scores.tools.lazy.SelfResetLazy" title="metrics_as_scores.tools.lazy.SelfResetLazy"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfResetLazy</span></code></a>. It is used to
lazily load pre-generated densities in the web application. Since these files
can get large quickly, the <a class="reference internal" href="#metrics_as_scores.tools.lazy.SelfResetLazy" title="metrics_as_scores.tools.lazy.SelfResetLazy"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfResetLazy</span></code></a> allows to free memory if
its loaded value has expired.</p>
<dl class="py class">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metrics_as_scores.tools.lazy.</span></span><span class="sig-name descname"><span class="pre">SelfResetLazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn_create_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn_destroy_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset_after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/metrics_as_scores/tools/lazy.html#SelfResetLazy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">T</span></code>]</p>
<p>This class lazily loads and automatically destroys its value after some timeout,
so that subsequent requests to it force the factory to produce a new instance.
All of its semantics are thread-safe (except for the explicitly named volatile
members).</p>
<dl class="py method">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn_create_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn_destroy_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset_after</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/metrics_as_scores/tools/lazy.html#SelfResetLazy.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.__init__" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>fn_create_val: <code class="docutils literal notranslate"><span class="pre">Callable[[],</span> <span class="pre">T]</span></code></dt><dd><p>Function that produces the desired value.</p>
</dd>
<dt>fn_destroy_val: <code class="docutils literal notranslate"><span class="pre">Callable[[T],</span> <span class="pre">Any]</span></code></dt><dd><p>Function that will be given the value before it is de-referenced here.</p>
</dd>
<dt>reset_after: <code class="docutils literal notranslate"><span class="pre">float</span></code></dt><dd><p>Amount of time, in seconds, after which the produced value ought to be destroyed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.reset_after">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reset_after</span></span><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.reset_after" title="Permalink to this definition"></a></dt>
<dd><p>Thread-safe getter for the reset-after property.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.unset_value">
<span class="sig-name descname"><span class="pre">unset_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/metrics_as_scores/tools/lazy.html#SelfResetLazy.unset_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.unset_value" title="Permalink to this definition"></a></dt>
<dd><p>Thread-safe method to destroy a previously produced value. If a value is
present, it is passed to py:meth:<cite>fn_destroy_val()</cite> first.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.has_value_volatile">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_value_volatile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.has_value_volatile" title="Permalink to this definition"></a></dt>
<dd><p>Checks, in a volatile manner, if a value is present.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.has_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">has_value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.has_value" title="Permalink to this definition"></a></dt>
<dd><p>Thread-safe getter for checking if a value is present.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.value_volatile">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value_volatile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.value_volatile" title="Permalink to this definition"></a></dt>
<dd><p>Volatile getter for the may-not-present value.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">T</span></em><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.value" title="Permalink to this definition"></a></dt>
<dd><p>Thread-safe getter for the value. If no value is present, one will be produced
and this getter blocks until then.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metrics_as_scores.tools.lazy.SelfResetLazy.value_future">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value_future</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Future</span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#metrics_as_scores.tools.lazy.SelfResetLazy.value_future" title="Permalink to this definition"></a></dt>
<dd><p>Returns an awaitable <code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code> that will hold the value once it is available.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-metrics_as_scores.tools">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-metrics_as_scores.tools" title="Permalink to this heading"></a></h2>
<p>This package contains tools that are commonly used in Metrics As Scores.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="metrics_as_scores.distribution.html" class="btn btn-neutral float-left" title="metrics_as_scores.distribution package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="metrics_as_scores.webapp.html" class="btn btn-neutral float-right" title="metrics_as_scores.webapp package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sebastian Hönel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>